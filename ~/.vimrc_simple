" =============================================================================
" 简化版Vim配置文件 - Python开发环境
" =============================================================================

" 基本设置
set number                    " 显示行号
set tabstop=4                " tab键显示为4个空格
set shiftwidth=4             " 自动缩进时使用4个空格
set expandtab                " 将tab转换为空格
set autoindent               " 自动缩进
set smartindent              " 智能缩进
set hlsearch                 " 高亮搜索结果
set incsearch                " 增量搜索
set ignorecase               " 搜索时忽略大小写
set smartcase                " 智能大小写搜索
set showmatch                " 显示匹配的括号
set encoding=utf-8           " 设置编码为UTF-8
set fileencoding=utf-8       " 文件编码
set backspace=indent,eol,start " 设置退格键行为
set ruler                    " 显示光标位置
set showcmd                  " 显示命令
set wildmenu                 " 命令行补全
set laststatus=2             " 总是显示状态栏
set mouse=a                  " 启用鼠标支持
set cursorline               " 高亮当前行
syntax on                    " 语法高亮

" Python特定设置
autocmd FileType python setlocal tabstop=4 shiftwidth=4 expandtab
autocmd FileType python setlocal foldmethod=indent
autocmd FileType python setlocal foldlevel=99

" 设置折叠
set foldmethod=indent
set foldlevel=99
nnoremap <space> za

" 删除行尾空格
autocmd BufWritePre *.py :%s/\s\+$//e

" 记住上次编辑位置
autocmd BufReadPost * if line("'\"") > 1 && line("'\"") <= line("$") | exe "normal! g'\"" | endif

" 自定义快捷键
let mapleader = ","

" 保存和退出
nnoremap <leader>w :w<CR>
nnoremap <leader>q :q<CR>
nnoremap <leader>wq :wq<CR>

" 分屏操作
nnoremap <leader>v :vsplit<CR>
nnoremap <leader>h :split<CR>

" 窗口切换
nnoremap <C-h> <C-w>h
nnoremap <C-j> <C-w>j
nnoremap <C-k> <C-w>k
nnoremap <C-l> <C-w>l

" Python运行快捷键
autocmd FileType python nnoremap <leader>r :!python %<CR>
autocmd FileType python nnoremap <leader>R :!python3 %<CR>

" 显示不可见字符
set list
set listchars=tab:▸\ ,trail:·,extends:❯,precedes:❮

" 配色方案（如果没有插件主题，使用内置的）
try
    colorscheme desert
catch
    colorscheme default
endtry

" 状态栏设置
set statusline=%F%m%r%h%w\ [FORMAT=%{&ff}]\ [TYPE=%Y]\ [POS=%l,%v][%p%%]\ %{strftime(\"%d/%m/%y\ -\ %H:%M\")} 